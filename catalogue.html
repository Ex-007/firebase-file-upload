<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="newprofile.css">
    <link rel="stylesheet" href="catalogue.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <title>Catalogue</title>
</head>
<body>

    <!-- THE NAVIGATION BAR -->
   <div class="header">
    <div class="logo">
        <h3>STUDENT SUPPORT</h3>
    </div>
    <div class="navigation">
        <ul>
            <li><a href="newprofile.html">Home</a></li>
            <li><a href="chat.html">Chat</a></li>
            <li><a href="#">Catalogue</a></li>
            <li><a href="notes.html">Note</a></li>
            <li><a href="./departments/marketPlace.html">Market Place</a></li>
            <li><a href="#">About us</a></li>
            <li id="signOut">Sign Out</li>
        </ul>
        <div class="userImageAndName">
            <img src="images/profile image.png" alt="profile picture" width="50px">
            <h3  id="usernamed"></h3>
        </div>
    </div>
</div>

    <div class="searchBox">
        <input type="text" id="searchInput" placeholder="Type here...">
        <i class="fa fa-search" id="searchThrough"></i>
    </div>


    <section id="mainDisplay"></section>



    <script type="module" src="newprofile.js"></script>
    <script type="module">

        let searchBtn = document.getElementById('searchThrough')

        // searchBtn.addEventListener('click', searchAndNavigate)
        function searchAndNavigate() {
            // Get the search input value
            var searchTerm = document.getElementById("searchInput").value.toLowerCase();

            // Find all h2 elements
            var h2Elements = document.querySelectorAll('h2');

            // Loop through h2 elements
            for (var i = 0; i < h2Elements.length; i++) {
                var h2Content = h2Elements[i].textContent.toLowerCase();

                // Check if the search term is included in h2 content
                if (h2Content.includes(searchTerm)) {
                    // Scroll to the corresponding section
                    var section = h2Elements[i].closest('div');
                    section.scrollIntoView({ behavior: 'smooth' });
                    return; // Stop searching after finding the first match
                }
            }

            alert("No matching section found!");
        }

        searchBtn.addEventListener('click', searchAndNavigate)

            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";


            const firebaseConfig = {
            apiKey: "AIzaSyBmY2XtNwXZrHeE5za2cp7sOFYOKjSvdCQ",
            authDomain: "school-newusersign.firebaseapp.com",
            projectId: "school-newusersign",
            storageBucket: "school-newusersign.appspot.com",
            messagingSenderId: "382800829354",
            appId: "1:382800829354:web:145aeb3f8e346c016129d3"
            };

            const app = initializeApp(firebaseConfig);
            import{getFirestore, doc, collection, getDocs, } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";
            let db = getFirestore()
            let displayTutorial = document.getElementById('mainDisplay')
            const myCollection = collection(db, 'PROJECTS');

            async function readAllDocuments() {
            try {
            const querySnapshot = await getDocs(myCollection);

            querySnapshot.forEach((doc) => {
                let newDiv = document.createElement('div')
                newDiv.setAttribute('class', 'container')
                newDiv.innerHTML = `
                
                    <div class="projectName">
                    <h2 id="projectName">${doc.data().Topic}</h2>
                </div>
                <div class="abstractAndContent">
                    <div class="abstract">
                        <h3 >ABSTRACT</h3>
                    </div>
                    <P id="projectAbstract">${doc.data().Abstract}</P>
                </div>
                <div class="contactInfo">
                    <div class="contactMap">
                        <ul>
                            <li><i class="fa fa-phone" style="font-size: 30px;"></i></li>
                            <li id="projectPhone">${doc.data().ProjectPhone}</li>
                        </ul>
                    </div>
                    <div class="contactMap">
                        <ul>
                            <li><i class="fa fa-location-dot" style="font-size: 30px;"></i></li>
                            <li id="projectAddress">${doc.data().Address}</li>
                        </ul>
                    </div>
                </div>
                <hr>
                
                `
            displayTutorial.appendChild(newDiv)
            console.log(doc.id, ' => ', doc.data());
            });
            } catch (error) {
            console.error('Error reading documents: ', error);
            }
            }

            readAllDocuments();
    </script>
</body>
</html>